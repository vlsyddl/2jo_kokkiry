<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.assa.repository.mapper.TodoListMapper">
	<resultMap id="todoMap" type="TodoList">
		<result column="board_no" property="boardNo" />
		<result column="todo_no" property="todoNo" />
		<result column="todo_check" property="todoCheck" />
	</resultMap>
	<resultMap type="Board" id="boardMap">
		<result column="reg_date" property="regDate" />
	</resultMap>
	<resultMap type="TodoBoard" id="todoBoardMap">
		<result column="reg_date" property="regDate" />
		<result column="todo_check" property="todoCheck" />
	</resultMap>



	<!-- todo list -->
	<!-- todo 리스트 -->

	<select id="selectTodoList" parameterType="TodoBoard" resultMap="todoBoardMap">
		select b.writer, b.title, t.todo as todo, b.reg_date, b.no,
		t.todo_check
		from assa_board b inner join assa_todo t
		on b.no = t.board_no
		where date_format(b.reg_date, '%Y%m%d') = date_format(now(), '%Y%m%d')
	</select>
	
	<select id="selectTodoListByNo" parameterType="int" resultMap="todoBoardMap">
		select b.writer, b.title, t.todo as todo, b.reg_date, b.no,
		t.todo_check
		from assa_board b inner join assa_todo t
		on b.no = t.board_no
		where no = #{no}
	</select>
	
	
	
	<!-- todo 등록 -->
	<insert id="insertTitle" parameterType="Board" useGeneratedKeys="true"
		keyProperty="no">
		insert into assa_board(
		title , writer, category
		)values(
		#{title}, #{writer}, 4
		)
	</insert>
	<insert id="insertTodo" parameterType="TodoList">
		insert into
		assa_todo(
		board_no, todo
		) value(
		#{boardNo}, #{todo}
		)
	</insert>

	

</mapper>

























